# TestTaskYADRO
Тестовое задание, выполненное для компании YADRO.

Реализован интерфейс Tape, содержащий чисто виртуальные методы read(), write(), rewind() и shift(), определяющие базовые операции с магнитной лентой: чтение, запись, перемотка и смещение. Также, в интерфейсе есть поля, хранящие временные промежутки в микросекундах, равные задержкам соответствующим операциям с лентой.

Реализован класс-наследник класса Tape TapeFile, использующий файл для эмуляции работы магнитной ленты. Класс принимает входной файл и создает временный файл, в котором хранятся отформатированные значения из входного файла для более эффективного и удобного использования произвольного доступа. Формат - 4-байтовые шестнадцатеричные числа.

Реализован класс TapeSorter, сортирующий две ленты, работающий с интерфейсами Tape. Для сортировки используется одна временная лента. В начале алгоритма первым значением с входной ленты инициализируется выходная лента, затем в оперативную память считываются M значений с входной ленты (если M равно нулю, размер оперативной памяти становится неограниченным программно), эти значения сортируются, создается временная лента, копирующая текущую выходную ленту, и, подобно алгоритму сортировки слиянием, отсортированный "чанк" сливается с временной лентой на выходную ленту. Алгоритм повторяется, пока не будет достигнут конец входной ленты.

Реализован класс FileHandler, принимающий по ссылке пути к входному и выходному файлу. Класс проверяет существование и возможность открыть входной и выходной файл или создать выходной файл. После, класс форматирует входные данные для соответствия условиям задачи, то есть, копирует в новый файл все целочисленные значения из входного файла, игнорируя числа, не попадающие в промежуток значения int и буквенные значения. Затем, класс изменяет исходный путь на путь к отформатированному файлу. Также, FileHandler инициализирует конфигурационный файл, или считывает значения из существующего. В конфигурационном файле хранятся значения задержек по операциям ленты, значение размера оперативной памяти M, а также флаг очистки временных файлов. По умолчанию все значения кроме флага равны нулю, а флаг равен true.

Реализованное консольное приложение TestTaskYADRO:
1) Принимает на вход абсолютные или относительные пути к входному и выходному файлу и проверяет корректность этих путей при помощи класса FileHandler. В случае отсутствия доступа к входному файлу, невозможности пересоздать выходной файл, совпадении входного и выходного файла, отсутствии корректных значений во входном файле, неверном количестве аргументов программы выводится сообщение о причине ошибки и программа завершается с кодом -1.
2) Используя класс FileHandler создает/открывает директорию для работы программы, в ней создает отформатированную копию входного файла, создает/считывает конфигурационный файл и выставляет соответствующие опции работы программы. В случае повреждения конфигурационного файла, программа просит разрешения пользователя на его реинициализацию. В случае отказа в доступе, программа завершается с кодом -2. В случае невозможности создания программных файлов, выводится сообщение о причине ошибки и программа завершается с кодом -1.
3) В случае успешной инициализации работы программы классом FileHandler, создаются два экземпляра класса TapeFile, для входной и выходной ленты соответственно, в них передаются пути и значения из конфигурационного файла. Выходная лента работает с опцией сохранения значений в соответствующий файл по завершении работы экземпляра класса.
4) Создается экземпляр класса TapeSorter, в который передаются указатели на входную и выходную ленту. Класс производит сортировку, после чего выводится сообщение об успешной отработке и программа завершается с кодом 0.

Для юнит-тестирования было реализовано консольное приложение UnitTesterForTestTaskYADRO:
1) Программа принимает неопределенное (большее или равное единице) количество путей к входным файлам для работы приложения TestTaskYADRO.
2) Программа производит сортировку встроенными методами языка, запускает TestTaskYADRO при помощи функции CreateProcessW(), передавая ему путь к файлу входной ленты и созданному файлу для записи результата работы программы.
3) Программа проверяет корректность работы TestTaskYADRO, сравнивая результат ее работы с вычисленным ожидаемым результатом, или проверяет правильность кода завершения, если входные данные заведомо подразумевали ошибку.
4) Выводится информация об обработанном файле, след работы TestTaskYADRO, ожидаемый и фактический результат работы и сообшение о их совпадении.
5) Пункты 2,3,4 повторяются для каждого входного файла, переданного приложению.

Были написаны юнит тесты, скомпилированы приложения TestTaskYADRO и UnitTesterForTestTaskYADRO и написан скрипт тестирования. Их можно найти в папке App в репозитории.
В папке Code находится исходный код для обоих приложений.

Работа выполнена на C++17, компилятор MSVC 14.21.

Надеюсь на дальнейшее сотрудничество!
